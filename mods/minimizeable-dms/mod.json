{"id":"minimizeable-dms","version":"1.0.0","dependencies":[],"events":{"events":{"dom-ready":{"on":["mainWindow.webContents.executeJavaScript(`async function waitForElementToDisplay(selector, time) {\r\n  return new Promise((resolve, reject) => {\r\n    if (document.querySelector(selector) != null) {\r\n      resolve(true);\r\n    }\r\n    setTimeout(() => {\r\n      resolve(waitForElementToDisplay(selector, time));\r\n    }, time);\r\n  });\r\n}\r\n\r\nconst collapseArrowSvg = \\`<svg fill=\"#FFFFFF\" height=\"20px\" width=\"20px\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 489.3 489.3\" xml:space=\"preserve\"><g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g><g id=\"SVGRepo_iconCarrier\"> <g> <g> <path d=\"M476.9,232.45H147.2l55.9-55.9c4.8-4.8,4.8-12.5,0-17.3s-12.5-4.8-17.3,0l-76.8,76.8c-4.8,4.8-4.8,12.5,0,17.3l76.8,76.8 c2.4,2.4,5.5,3.6,8.7,3.6s6.3-1.2,8.7-3.6c4.8-4.8,4.8-12.5,0-17.3l-55.9-55.9H477c6.8,0,12.3-5.5,12.3-12.3 C489.2,237.85,483.7,232.45,476.9,232.45z\"></path> <path d=\"M24.5,476.25V13.05c0-6.8-5.5-12.3-12.3-12.3S0,6.25,0,13.05v463.2c0,6.8,5.5,12.3,12.2,12.3S24.5,483.05,24.5,476.25z\"></path> </g> </g> </g></svg>`;\r\nconst rightArrowSvg = `<svg fill=\"#FFFFFF\" height=\"15px\" width=\"20px\" version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 330 330\" xml:space=\"preserve\"><g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g><g id=\"SVGRepo_iconCarrier\"> <path id=\"XMLID_222_\" d=\"M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001 c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213 C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606 C255,161.018,253.42,157.202,250.606,154.389z\"></path> </g></svg>`;\r\n\r\nfunction buildExpander(navHeight, navWidth) {\r\n  const expanding = document.createElement(\"div\");\r\n  expanding.id = \"expanding\";\r\n  expanding.style.height = navHeight;\r\n  expanding.style.width = navWidth;\r\n  expanding.style.backgroundColor = \"var(--background-primary)\";\r\n  return expanding;\r\n}\r\n\r\nfunction buildMinimizeArrow(navWidth) {\r\n  const minimizeArrow = document.createElement(\"div\");\r\n  minimizeArrow.style.width = navWidth;\r\n  minimizeArrow.style.height = \"20px\";\r\n  minimizeArrow.style.display = \"flex\";\r\n  minimizeArrow.style.justifyContent = \"flex-start\";\r\n  minimizeArrow.style.margin = \"2px 2px 2px 2px\";\r\n  minimizeArrow.style.cursor = \"pointer\";\r\n  return minimizeArrow;\r\n}\r\n\r\nfunction buildMinimizeIcon() {\r\n  const minimizeIcon = document.createElement(\"span\");\r\n  minimizeIcon.style.width = \"20px\";\r\n  minimizeIcon.style.height = \"20px\";\r\n  minimizeIcon.innerHTML = collapseArrowSvg;\r\n  minimizeIcon.style.color = \"var(--text-normal)\";\r\n  return minimizeIcon;\r\n}\r\n\r\nfunction makeMinimized(expanding, collapsedParent, nav, minimizeIcon) {\r\n  expanding.style.position = \"absolute\";\r\n  expanding.style.top = \"0px\";\r\n  expanding.style.right = \"0px\";\r\n  collapsedParent.appendChild(expanding);\r\n  expanding.style.width = \"20px\";\r\n  nav.style.visibility = \"hidden\";\r\n  minimizeIcon.innerHTML = rightArrowSvg;\r\n}\r\n\r\nfunction makeMaximized(expanding, navParent, nav, minimizeIcon, navWidth) {\r\n  expanding.style.position = \"relative\";\r\n  navParent.prepend(expanding);\r\n  expanding.style.width = navWidth;\r\n  nav.style.visibility = \"visible\";\r\n  minimizeIcon.innerHTML = collapseArrowSvg;\r\n}\r\n\r\nasync function run() {\r\n  console.log(\"Minimizeable DMs loaded\");\r\n  await waitForElementToDisplay(\"div[class^='sidebar_']\", 1000);\r\n  await waitForElementToDisplay(\"nav[aria-label^='Servers sidebar']\", 1000);\r\n\r\n  const nav = document.querySelector(\"div[class^='sidebar_'\");\r\n  const navHeight = nav.style.height;\r\n  const navWidth = nav.style.width;\r\n  const expanding = buildExpander(navHeight, navWidth);\r\n  const collapsedParent = document.querySelector(\r\n    \"nav[aria-label^='Servers sidebar']\"\r\n  );\r\n  const navParent = nav.parentNode;\r\n  expanding.appendChild(nav);\r\n  navParent.prepend(expanding);\r\n  const minimizeArrow = buildMinimizeArrow(navWidth);\r\n  nav.style.height = \"calc(100% - 20px)\";\r\n  expanding.insertBefore(minimizeArrow, nav);\r\n  const minimizeIcon = buildMinimizeIcon();\r\n  minimizeArrow.appendChild(minimizeIcon);\r\n  let isMinimized = false;\r\n  minimizeArrow.addEventListener(\"click\", () => {\r\n    if (!isMinimized) {\r\n      makeMinimized(expanding, collapsedParent, nav, minimizeIcon);\r\n      isMinimized = true;\r\n    } else {\r\n      makeMaximized(expanding, navParent, nav, minimizeIcon, navWidth);\r\n      isMinimized = false;\r\n    }\r\n  });\r\n}\r\nrun();\r\n`)"],"once":[]}}}}